heterograph.query.processor_dfs
===============================

.. py:module:: heterograph.query.processor_dfs


Classes
-------

.. autoapisummary::

   heterograph.query.processor_dfs.QGraph
   heterograph.query.processor_dfs.QueryProcessorDFS


Functions
---------

.. autoapisummary::

   heterograph.query.processor_dfs.dfs_traversal
   heterograph.query.processor_dfs.get_paths


Module Contents
---------------

.. py:class:: QGraph(pattern=None, vx_args=None, eg_args=None)

   Bases: :py:obj:`heterograph.hgraph.HGraph`


   A class used to represent a query graph.

   This class extends the HGraph class and adds functionality for processing queries and transforming them into graph definitions.

   .. note::

      * Argument `vx_args` is a function that has signature: `vx_args(qgraph, vx, *args, **kwargs)`.
      * Argument `eg_args` is a function that has signature: `eg_args(qgraph, eg, *args, **kwargs)`.
      * Both functions are invoked during the qgraph building process, and are used to set the arguments from the pattern into the corresponding vertices and edges of the qgraph.

   .. rubric:: Example

   >>> from heterograph.query.qgraph import QGraph
   >>> qgraph = QGraph(pattern="A{1} ={ weight: 3.14 }> B{2}")
   >>> print(qgraph.pattern)
   A{1} ={ weight: 3.14 }> B{2}
   >>> print(qgraph.graph_def)
   QueryGraphDef (src: {'A'}, snk: {'B'}, steps: [('A', ([1], {})), ('B', ([2], {})), ('A', 'B', ([], {'weight': 3.14}))])


   .. py:method:: __init__(pattern=None, vx_args=None, eg_args=None)

      Constructs all the necessary attributes for the QGraph object.

      :param pattern: The query to be processed. Defaults to "0".
      :type pattern: str
      :param vx_args: The vertex arguments. Defaults to None.
      :type vx_args: dict
      :param eg_args: The edge arguments. Defaults to None.
      :type eg_args: dict



   .. py:attribute:: pattern
      :value: None


      pattern to be processed and translated to a graph.

      :type: (str)


   .. py:attribute:: engine

      engine used to translate the pattern

      :type: (QueryAQL)


   .. py:attribute:: graph_def
      :value: None


      graph object resulting from processing the query.


   .. py:method:: _process(vx_args, eg_args)

      Processes the query and transforms it into a graph definition.

      :param vx_args: A function to handle vertex arguments.
      :param eg_args: A function to handle edge arguments.

      :returns: The graph definition resulting from processing the query.
      :rtype: QueryGraphDef



   .. py:attribute:: __g

      an instance of graph_tool's Graph object which represents the actual directed graph.


   .. py:attribute:: __ginit
      :value: None


      stores initial user-defined graph properties.


   .. py:attribute:: __vinit
      :value: None


      stores initial user-defined vertex properties.


   .. py:attribute:: __einit
      :value: None


      stores initial user-defined edge properties.


   .. py:attribute:: __vx_counter
      :value: None


      keeps track of the total number of vertices added to the graph. Each vertex gets a unique id generated from this counter.


   .. py:attribute:: __ivx
      :value: None


      a dictionary that maps internal vertex IDs (as used by graph_tool) to persistent vertex IDs (as seen by users).


   .. py:attribute:: __vx
      :value: None


      the reverse of __ivx, mapping persistent vertex IDs (as seen by users) to internal vertex IDs (as used by graph_tool).


   .. py:attribute:: __in
      :value: None


      dictionary that stores incoming neighbors of each vertex.


   .. py:attribute:: __out
      :value: None


      dictionary that stores outgoing neighbors of each vertex.


   .. py:attribute:: __properties
      :value: None


      an instance of HGraphProps that manages property maps for graph, vertices and edges.


   .. py:attribute:: read_only
      :value: None


      indicates whether the graph is in read-only mode. If True, any graph modification raises an error.


   .. py:property:: igraph

      Returns the internal Graph (graph-tool) object.


   .. py:property:: to_ivx

      Returns a dictionary mapping internal vertex IDs to persistent vertex IDs.


   .. py:property:: to_vx

      Returns a dictionary mapping persistent vertex IDs to internal vertex IDs.


   .. py:property:: style

      Get or set the `graph` style.

      When setting the style to ``None``, the current style is cleared.
      Otherwise, the provided style is added or updated.


   .. py:property:: vstyle

      Get or set the `vertex` style.

      When setting the style to ``None``, the current style is cleared.
      Otherwise, the provided style is added or updated.


   .. py:property:: estyle

      Get or set the `edge` style.

      When setting the style to ``None``, the current style is cleared.
      Otherwise, the provided style is added or updated.


   .. py:property:: pmap

      Gets/sets property maps of graph, vertices and edges.

      * ``g.pmap``: get/set graph properties
      * ``g.pmap[vx]``: get/set vertex ``vx`` properties
      * ``g.pmap[edge]``: get/set edge ``edge`` properties


   .. py:property:: num_vx

      This property returns the total number of vertices in the graph.


   .. py:property:: vertices

      This property returns a list of all vertex IDs in the graph.


   .. py:property:: source

      Get list of source vertices (vertices with no incoming edges) in the graph.


   .. py:property:: sink

      Get list of sink vertices (vertices with no outgoing edges) in the graph.


   .. py:method:: num_in_vx(vx)

      Calculates and returns the number of incoming edges for a given vertex.

      :param vx: The ID of the vertex whose in-degree is to be calculated.
      :type vx: int

      :returns: Number of incoming edges for the specified vertex `vx`.
      :rtype: int

      :raises RuntimeError: If the provided vertex ID `vx` does not exist.

      .. rubric:: Example

      >>> g = HGraph()
      >>> v1 = g.add_vx()
      >>> v2 = g.add_vx()
      >>> e = g.add_edge(v1, v2)
      >>> g.num_in_vx(v2)
      1



   .. py:method:: num_out_vx(vx)

      Returns the number of vertices that are connected to this vertex
      via outgoing edges.

      :param vx: The ID of the vertex whose out-degree is to be calculated.
      :type vx: int

      :returns: Number of vertices that are connected to the specified vertex `vx`.
      :rtype: int

      :raises RuntimeError: If the provided vertex ID `vx` does not exist.

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(3)
      >>> e = g.add_edge(0, [1, 2])
      >>> g.num_out_vx(0)
      2



   .. py:method:: out_vx(vx, *, order=None, after=True, anchor=None)

      Returns a list of vertices that are connected to vertex `vx` via outgoing edges.
      This includes all vertices that can be reached by following directed edges starting from `vx`.
      The ordering is controlled by the `order` parameter.

      If `order` is provided, this method will first remove the list of vertices specified in `order`, and then
      append after or before the `anchor` according to the value of `after`. If the `anchor` is None,
      then the `anchor` is assumed to be the last element.

      :param vx: The ID of the vertex whose out-neighbours are to be retrieved.
      :type vx: int
      :param order: A list of neighbouring vertices in their desired order. Defaults to None.
      :type order: list of ints, optional
      :param after: If True and an anchor is provided, append the ordered neighbours to it,
                    else prepend them. Defaults to True.
      :type after: bool, optional
      :param anchor: The vertex ID around which we should arrange our neighbours. Ignored if order is not provided. Defaults to None.
      :type anchor: int, optional

      :returns: A list of vertices that are connected to the specified `vx` via outgoing edges in the requested order (if any).
      :rtype: list of ints

      :raises RuntimeError: If the vertex ID `vx` does not exist, or if the ordered neighbours provided in the 'order' argument do not form a subset of those connected to `vx`.
          Also raised if an invalid anchor is specified (not an integer).

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(4)  # adds 4 vertices and returns their IDs in a list [0, 1, 2, 3]
      >>> e = g.add_edge(0, [1, 2, 3])  # connects vertex 0 to vertices [1, 2, 3]
      >>> g.out_vx(0)  # gets the out-neighbours of vertex 0
      [1, 2, 3]
      >>> g.out_vx(0, order=[2,1,3])
      [2, 1, 3]
      >>> g.out_vx(0, order=[3,2], after=True, anchor=1)
      [1, 3, 2]
      >>> g.out_vx(0, order=[3,2], after=False, anchor=1)
      [3, 2, 1]
      >>> g.out_vx(0, order=[2,3], after=True)
      [1, 2, 3]



   .. py:method:: in_vx(vx, *, order=None, after=True, anchor=None)

      Returns a list of vertices that are connected to vertex `vx` via incoming edges.

      This includes all vertices from which directed edges point to `vx`. The ordering is
      controlled by the `order` parameter.

      If `order` is provided, this method will first remove the list of vertices specified in `order`, and then
      append after or before the `anchor` according to the value of `after`. If the `anchor` is None,
      then the `anchor` is assumed to be the last element.

      :param vx: The ID of the vertex whose in-neighbours are to be retrieved.
      :type vx: int
      :param order: A list of neighbouring vertices in their desired order. Defaults to None.
      :type order: list of ints, optional
      :param after: If True and an anchor is provided, append the ordered neighbours to it,
                    else prepend them. Defaults to True.
      :type after: bool, optional
      :param anchor: The vertex ID around which we should arrange our neighbours. Ignored if order is not provided. Defaults to None.
      :type anchor: int, optional

      :returns: A list of vertices that are connected to the specified `vx` via incoming edges in the requested order (if any).
      :rtype: list of ints

      :raises RuntimeError: If the vertex ID `vx` does not exist, or if the ordered neighbours provided in the 'order' argument do not form a subset of those connected to `vx`.
          Also raised if an invalid anchor is specified (not an integer).

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(4)  # adds 4 vertices and returns their IDs in a list [0, 1, 2, 3]
      >>> e = g.add_edge([1, 2, 3], 0)  # connects vertices [1, 2, 3] to 0
      >>> g.in_vx(0)  # gets the in-neighbours of vertex 0
      [1, 2, 3]
      >>> g.in_vx(0, order=[3,2], after=False, anchor=1)
      [3, 2, 1]
      >>> g.in_vx(0, order=[2], after=False)
      [2, 3, 1]



   .. py:method:: add_vx(n=1)

      Add a new vertex to the graph.

      :param n: The number of vertices to add. Default is 1.
      :type n: int

      :returns:

                * if `n` == 1: returns the ID (int) of newly added vertex
                * if `n` > 1`: returns a list of IDs (list of int) of the newly added vertices.
      :rtype: int or list

      .. rubric:: Example

      >>> g = HGraph()
      >>> g.add_vx()  # adds one new vertex
      0
      >>> g.add_vx(3)  # adds three new vertices
      [1, 2, 3]
      >>> g.num_vx
      4



   .. py:method:: rm_vx(vs, verify=True)

      Remove one or more vertices from the graph and disconnect all edges connected to them.

      This function removes a specified vertex (or multiple vertices) along with all the edges that are incident
      on it in both directions i.e., incoming and outgoing edges. It also updates the internal dictionaries tracking
      neighbours of each vertex, so these changes will reflect in the `in_vx` and `out_vx` methods when called for
      this same vertices.

      :param vs: The ID(s) of the vertex to be removed. If it's a single integer, then it represents one
                 vertex. If it's a list, then it contains multiple vertices.
      :type vs: int or list
      :param verify: If True, raises an exception if any specified
                     vertex does not exist in the graph. Otherwise, any vertex not found is
                     ignored. Default is True.
      :type verify: bool, optional

      :raises RuntimeError: If any of the provided vertex IDs `vs` do not exist in the graph.

      .. rubric:: Example

      >>> g = HGraph()
      >>> g.add_vx(3)  # adds three vertices
      [0, 1, 2]
      >>> g.rm_vx(1)
      >>> g.vertices
      [0, 2]
      >>> g.rm_vx([0, 2])
      >>> g.vertices
      []



   .. py:method:: check_vx(vs, verify=False)

      Checks if a vertex (or set of vertices) exist in the graph.

      This function checks whether one or more vertices specified by their IDs exist in the graph or not. It returns True if all vertices are present and False otherwise. If `verify` is set to True, it raises an exception with an error message specifying which vertex does not exist (if any).

      :param vs: The ID(s) of the vertex/vertices to be checked. Can be a single integer or a list of integers.
      :type vs: int or list of ints
      :param verify: If True, raises an exception if any specified vertex does not exist in the graph. Default is False.
      :type verify: bool, optional

      :returns: True if all vertices are present and False otherwise.
      :rtype: bool

      :raises RuntimeError: If `verify` is set to True and any of the provided vertices do not exist in the graph. The error message contains the ID of that vertex that does not exist.

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(3) # adds vertices [0, 1, 2]
      >>> g.check_vx([0, 2])
      True
      >>> g.check_vx(4)
      False



   .. py:property:: num_edges

      Returns the total number of edges present in the graph.


   .. py:property:: edges

      Returns a list of all edges as tuples (v1, v2) where each tuple represents an edge
      connecting vertex v1 and v2 in the graph instance. The vertices are identified by their integer IDs.


   .. py:method:: add_edge(s, t)

      Adds a new edge to the graph connecting two vertices `s` and `t`.

      Adds one or more edges between vertices. Notes:
         * adding a self-loop where vertex `s` == vertex `t` is ignored. Use vertex property maps.
         * adding multiple edges between any two vertices is ignored. Use edge property maps.

      :param s: The source vertex ID(s). If 's' is an integer, it represents one
                source vertex. If 's' is a list, it contains multiple source vertices.
      :type s: int or list of ints
      :param t: The target vertex ID(s). Similar to 's', if 't' is an integer it
                represents one target vertex and if 't' is a list, it contains multiple
                target vertices.
      :type t: int or list of ints

      :returns:

                A list of edges added as tuples in the format (source_vertex, target_vertex).
                            Each tuple represents an edge connecting source_vertex to target_vertex in the graph instance.
      :rtype: list of tuples

      :raises RuntimeError: If 's' and/or 't' do not exist in the graph.
          Also, raised if any of the provided vertex IDs are invalid.

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(4)  # [0, 1, 2, 3]
      >>> g.add_edge(0, [1, 2])  # connects vertex 0 to vertices [1,2]
      [(0, 1), (0, 2)]
      >>> g.add_edge([1, 2], 0) # connects vertices [1,2] to vertex 0
      [(1, 0), (2, 0)]
      >>> g.add_edge(2, 3)
      [(2, 3)]
      >>> g.edges
      [(0, 1), (0, 2), (1, 0), (2, 0), (2, 3)]



   .. py:method:: check_edge(edge, verify=False)

      Check if one or more edges exist in the graph.

      :param edge: The ID(s) of the edge/edges to be checked.
                   If `edge` is a tuple, it represents one edge. If `edge` is a list,
                   it contains multiple edges.
      :type edge: tuple or list of tuples
      :param verify: If True, raises an exception if any specified
                     edge does not exist in the graph. Default is False.
      :type verify: bool, optional

      :returns: Whether all edges are present and valid or not.
      :rtype: bool

      :raises RuntimeError: If `verify` is True, and one or more edges are not found in the graph.

      .. rubric:: Example

      >>> g = HGraph()
      >>> g.add_vx(3)
      [0, 1, 2]
      >>> g.add_edge(0, [1, 2])
      [(0, 1), (0, 2)]
      >>> g.check_edge((0, 1))
      True
      >>> g.check_edge([(0, 1), (0, 2)])
      True
      >>> g.check_edge([(0, 1), (0, 4)])
      False



   .. py:method:: rm_edge(edge, verify=True)

      Removes one or more edges from the graph.

      :param edge: The ID(s) of the edge/edges to be removed.
                   If `edge` is a tuple, it represents one edge. If `edge` is a list,
                   it contains multiple edges.
      :type edge: tuple or list of tuples
      :param verify: If True, raises an exception if any specified
                     edge does not exist in the graph. Otherwise, any edge not found is
                     ignored. Default is True.
      :type verify: bool, optional

      :returns: None

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(3) # adds 3 vertices
      >>> g.add_edge(0, [1, 2])
      [(0, 1), (0, 2)]
      >>> g.rm_edge((0,1)) # removes edge between vertex 0 and 1
      >>> g.edges
      [(0, 2)]

      :raises RuntimeError: If `verify` is True and one or more edges are not found in the graph.



   .. py:method:: erase()

      Resets the graph to its initial state, clearing all vertices and edges.

      The properties of the graph will be reset as well, returning them to their default values.
      Read-only status is also set back to False.

      This function does not accept any arguments and does not return anything.

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(3)   # adds three vertices
      >>> e = g.add_edge(0, 1)  # connects vertex 0 to vertex 1
      >>> g.num_vx
      3
      >>> g.num_edges
      1
      >>> g.erase()
      >>> g.num_vx
      0
      >>> g.num_edges
      0



   .. py:method:: copy(*, vs=None, g=None, induced=True, ret_map=False)

      Creates a copy of the current graph.

      This function creates an independent clone of the current graph instance. The cloned graph is optionally restricted to a subset of vertices (`vs`) or can be copied as an induced subgraph. An induced subgraph means that edges from any two nodes included in the copy are also copied automatically. Properties are automatically copied.

      :param vs: A list of vertex IDs specifying which vertices should be included in the copy. If not provided, all vertices will be copied. Default is None.
      :type vs: list of ints
      :param g: The HGraph instance to store the clone. If provided, the clone is added. If not provided, a new HGraph instance is created. Default is None.
      :type g: HGraph instance, optional
      :param induced: A flag indicating whether an induced subgraph should be copied or all edges should be copied. Default is True.
      :type induced: bool, optional
      :param ret_map: A flag indicating whether the vertex mapping from old to new graph should be returned. Default is False.
      :type ret_map: bool, optional

      :returns:    * If `ret_map` is False, returns a copy of the cloned graph.
                   * If `ret_map` is True, returns a tuple containing both a copy of the current graph and a mapping from old to new vertices in the form of {old vertex: new vertex}.
      :rtype: HGraph instance

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(3)   # adds three vertices, returns their IDs [0, 1, 2]
      >>> e = g.add_edge(0, [1, 2])   # connects vertex 0 to vertices [1, 2]
      >>> (h, map_cp) = g.copy(vs=[0, 2], induced=True, ret_map=True)   # creates a copy of the graph
      >>> map_cp # 0 => 0, 2 => 1
      {0: 0, 2: 1}
      >>> h.vertices
      [0, 1]
      >>> h.edges
      [(0, 1)]



   .. py:method:: remove_subgraph(vx)

      Remove a subgraph rooted at a specified vertex.

      This method removes all vertices and edges connected to the provided vertex and its descendants in the graph.

      :param vx: The ID of the vertex from where the subgraph starts being removed.
      :type vx: int

      :returns: The function doesn't return any value, it directly modifies the graph by removing vertices and edges.
      :rtype: None

      .. rubric:: Example

      >>> g = HGraph()
      >>> vs = g.add_vx(5)  # adds five vertices with IDs [0, 1, 2, 3, 4]
      >>> e = g.add_edge(0, [1, 2])  # connects vertex 0 to vertices 1 and 2
      >>> e = g.add_edge(1, 3)  # connects vertex 1 to vertex 3
      >>> e = g.add_edge(2, 4)  # connects vertex 2 to vertex 4
      >>> g.remove_subgraph(0)  # removes the subgraph rooted at vertex 0
      >>> g.vertices
      []
      >>> g.edges
      []



   .. py:method:: render(*, filename='graph.svg', format='svg', pipe=False, vs=None, induced=True, gstyle=None, vstyle=None, estyle=None, **kwargs)

      Renders the graph (or part of the graph). The rendering style can be specified without changing the internal graph style.

      :param filename: The output filename. Defaults to 'graph.svg'.
      :type filename: str, optional
      :param format: The format of the generated images ('png', 'pdf', etc). Defaults to 'svg'.
      :type format: str, optional
      :param pipe: If True, return a string representation of the graph in specified format instead of saving an image file. Defaults to False.
      :type pipe: bool, optional
      :param vs: A list of vertex IDs specifying which vertices should be included in the rendering. If not provided, all vertices will be included. Defaults to None.
      :type vs: list of ints, optional
      :param induced: Whether or not only the edges within the subgraph specified by `vs` should be rendered. Defaults to True.
      :type induced: bool, optional
      :param gstyle: The graph style as a dictionary where keys are property names and values are their new values. Defaults to None.
      :type gstyle: dict, optional
      :param vstyle: The vertex style as a dictionary where keys are property names and values are their new values. Defaults to None.
      :type vstyle: dict, optional
      :param estyle: The edge style as a dictionary where keys are property names and values are their new values. Defaults to None.
      :type estyle: dict, optional
      :param \*\*kwargs: Additional keyword arguments to pass to the rendering engine.

      :returns:     * If `pipe` is True, returns a string representation of the graph in specified format.
                    * Otherwise (if `pipe` is False), no return value. The rendered image file will be saved to disk with the filename provided.
      :rtype: str or None



   .. py:method:: view(host='0.0.0.0', port='8888', viewer=None, **kwargs)

      Open an interactive web interface to visualize this graph.

      This method opens a local server and displays the graph in a user-friendly way. It allows users to interact with the graph, such as zooming and panning.

      :param host: The address where the web interface should be hosted. Default is '0.0.0.0'.
      :type host: str, optional
      :param port: The port on which to run the server. Default is 8888.
      :type port: int, optional
      :param viewer: An existing HGraphViewer instance to use for visualization. If not provided, a new instance will be created. Default is None.
      :type viewer: HGraphViewer instance, optional
      :param \*\*kwargs: Additional arguments passed directly to the viewer's run method.

      :returns: None



   .. py:method:: __reset()

      Private method. Resets the graph to its initial state.
      Used by :meth:`__init__` and :meth:`erase` methods.



   .. py:method:: __gen_vx_id()

      Private method. Generates a unique integer ID for a new vertex in the graph.



   .. py:method:: __to_ivs(vs)

      Private method which maps persistent vertex IDs to graph-tool vertex IDs (ivx).



   .. py:method:: __neighbours(_in, vx, order=None, after=True, anchor=None)

      Private method which outputs and orders input/output neighbours. Used by :meth:`in_vx` and :meth:`out_vx` methods.



.. py:function:: dfs_traversal(g, vx, pre=None, post=None, inh=None)

   Perform a depth-first search (DFS) traversal of a graph starting from a given vertex.

   :param g: The graph on which to perform the DFS traversal.
   :type g: HGraph
   :param vx: The starting vertex for the DFS traversal.
   :type vx: int
   :param pre: A function to be called before visiting each vertex's children.
               It takes two arguments: the graph `g` and the current vertex `vx`.
               An optional third argument `inh` can be added to receive inherited data. Defaults to None.
   :type pre: function, optional
   :param post: A function to be called after visiting each vertex's children.
                It takes two arguments: the graph `g` and the current vertex `vx`.
                An optional third argument `synth` can be added to receive synthesized data from its direct children. Defaults to None.
   :type post: function, optional
   :param inh: Data to be inherited by each vertex. Defaults to None.
   :type inh: any, optional

   :returns: The synthesized data for the starting vertex, if a `post` function is provided and returns a value.
   :rtype: Any

   .. note::

      - The `dfs_traversal` function should be used instead of `dfs_visitor` to support sharing data between parent and child nodes (inheritance and/or synthesis). Furthermore, `dfs_traversal` is more efficient than `dfs_visit` and may perform better with larger graphs.
      - The `pre` function is always invoked before visiting children. If data is returned, it will be inherited by its children through the `inh` parameter.
      - The `post` function is always invoked after visiting children. It can optionally return data, which is aggregated into a list and passed to the parent as the `synth` parameter.
      - The `pre` and `post` functions can raise `StopSearch` to halt the search.
      - In the example below, the `pre` function uses inherited data to assign depth to a child vertex, while the `post` function uses synthesized data to count the number of visited vertices.

   ""

   .. rubric:: Example

   >>> from heterograph import HGraph
   >>> from heterograph.algorithm.dfs import dfs_traversal
   >>> def pre_visit(g, vx, inh):
   ...   print(f"Pre-visit: {vx}, inherited: {inh}")
   ...   return inh + 1
   >>> def post_visit(g, vx, synth):
   ...   print(f"Post-visit: {vx}, synthesized: {synth}")
   ...   return sum(synth) + 1

   >>> g = HGraph()
   >>> g.add_vx(5)
   [0, 1, 2, 3, 4]
   >>> g.add_edge(0, [1, 2])
   [(0, 1), (0, 2)]
   >>> g.add_edge(1, 3)
   [(1, 3)]
   >>> g.add_edge(2, 4)
   [(2, 4)]
   >>> num_vs = dfs_traversal(g, 0, pre=pre_visit, post=post_visit, inh=0)
   Pre-visit: 0, inherited: 0
   Pre-visit: 1, inherited: 1
   Pre-visit: 3, inherited: 2
   Post-visit: 3, synthesized: []
   Post-visit: 1, synthesized: [1]
   Pre-visit: 2, inherited: 1
   Pre-visit: 4, inherited: 2
   Post-visit: 4, synthesized: []
   Post-visit: 2, synthesized: [1]
   Post-visit: 0, synthesized: [2, 2]

   >>> print(num_vs)
   5


.. py:function:: get_paths(g, vs=None)

   Returns all DFS paths in the graph `g` starting from the given vertices `vs`.

   :param g: The graph to search for paths.
   :type g: Graph
   :param vs: The starting vertices. If None, then graph source vertices will be considered.
   :type vs: list or None

   :returns: A list of paths generated by DFS, where each path is represented as a list of vertices.
   :rtype: list

   .. rubric:: Example

   >>> from heterograph.algorithm.dfs import get_paths
   >>> from heterograph import *
   >>> g = HGraph()
   >>> g.add_vx(5)
   [0, 1, 2, 3, 4]
   >>> g.add_edge(0, 1)
   [(0, 1)]
   >>> g.add_edge(1, [2, 3])
   [(1, 2), (1, 3)]
   >>> g.add_edge([2, 3], 4)
   [(2, 4), (3, 4)]
   >>> get_paths(g, vs=[0, 2])
   [[0, 1, 2, 4], [0, 1, 3, 4], [2, 4]]


.. py:class:: QueryProcessorDFS

   This class employs Depth-First Search (DFS) to traverse a graph and identify matches corresponding to a specified query graph. Only works for graphs that are trees (i.e., no cycles).


   .. py:method:: check_depth(root_depth, vx_depth, depth_constr)
      :staticmethod:


      Checks if the vertex depth is within the given depth constraints.

      :param root_depth: The depth of the root vertex.
      :type root_depth: int
      :param vx_depth: The depth of the current vertex.
      :type vx_depth: int
      :param depth_constr: A tuple containing the minimum and maximum depth constraints.
      :type depth_constr: tuple

      :returns: True if the vertex depth is within the constraints, False otherwise.
      :rtype: bool



   .. py:method:: __find_match(g, qgraph, chain, qchain, path_check, root_depth, vx_depths, fd, gd)
      :staticmethod:


      Finds matches in the graph for the given query graph.

      :param g: The graph to be searched.
      :type g: HGraph
      :param qgraph: The query graph.
      :type qgraph: QGraph
      :param chain: A tuple representing the current chain in the graph.
      :type chain: tuple
      :param qchain: A tuple representing the current chain in the query graph.
      :type qchain: tuple
      :param path_check: A function to check the path validity.
      :type path_check: function
      :param root_depth: The depth of the root vertex.
      :type root_depth: int
      :param fd: This parameter specifies the distance between the root and the first node of the match. If not provided, the distance is unrestricted.
      :type fd: optional, can be an integer or a tuple of two integers
      :param gd: This parameter specifies the distance between the root and any node of the match. If not provided, the distance is unrestricted.
      :type gd: optional, can be an integer or a tuple of two integers

      :returns: A list of matches found in the graph.
      :rtype: list



   .. py:method:: run(g, qgraph, *, vs=None, path_check=None, match_filter=None, fd=None, gd=None)

      Executes the query on the graph.

      :param g: The graph to be queried.
      :type g: HGraph
      :param qgraph: the query graph.
      :type qgraph: QGraph
      :param vs: The vertices to start the query from. If not specified, then the source vertices of the graph will be used.
      :type vs: list, optional
      :param path_check: A function to check the path validity between two elements of the match.
      :type path_check: function, optional
      :param match_filter: A function to filter the matches.
      :type match_filter: function, optional
      :param fd: This parameter specifies the distance between the root and the first node of the match. If not provided, the distance is unrestricted.
      :type fd: optional, can be an integer or a tuple of two integers
      :param gd: This parameter specifies the distance between the root and any node of the match. If not provided, the distance is unrestricted.
      :type gd: optional, can be an integer or a tuple of two integers

      :returns: A list of results matching the query.
      :rtype: list



